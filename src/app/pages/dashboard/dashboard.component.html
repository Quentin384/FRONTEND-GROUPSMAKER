<div class="dashboard">
  <!-- Bouton admin -->
  <button *ngIf="isAdmin()" (click)="redirigerVersAdmin()" class="btn-admin">
    ğŸ› AccÃ©der Ã  lâ€™administration
  </button>

  <h1>Vos listes</h1>

  <!-- CrÃ©ation de nouvelle liste (avec ajout de personnes Ã  la volÃ©e avant envoi) -->
  <app-form-liste (nouvelleListe)="ajouterListe($event)"></app-form-liste>

  <!-- Affichage de toutes les listes existantes -->
  <div *ngFor="let liste of listes" class="liste">
    <h2>
      {{ liste.nom }}
      <span class="badge">{{ (liste.personnes || []).length }} personnes</span>
      <span class="badge tirages">{{ liste.tirages }} tirages</span>
    </h2>

    <!-- Liste des personnes associÃ©es Ã  cette liste -->
    <ul>
      <li *ngFor="let p of liste.personnes">
        ğŸ‘¤ <strong>{{ p.nom }}</strong>
        | Genre : {{ p.genre }}
        | ğŸ‡«ğŸ‡· FranÃ§ais : {{ p.aisanceFrancais }}/4
        | ğŸ‘µ Ancien DWWM : {{ p.ancienDWWM ? 'Oui' : 'Non' }}
        | ğŸ”§ Tech : {{ p.niveauTechnique }}/4
        | Profil : {{ p.profil }}
        | Ã‚ge : {{ p.age }}
      </li>
    </ul>

    <!-- Ajout d'une personne dans cette liste -->
    <form (ngSubmit)="ajouterPersonneDansListe(liste.id)" class="form form-inline">
      <input type="text" placeholder="Nom" [(ngModel)]="personneForm[liste.id].nom" name="nom-{{liste.id}}" required minlength="4" maxlength="49" />
      <select [(ngModel)]="personneForm[liste.id].genre" name="genre-{{liste.id}}" required>
        <option value="MASCULIN">Masculin</option>
        <option value="FEMININ">FÃ©minin</option>
        <option value="NE_SE_PRONONCE_PAS">Ne se prononce pas</option>
      </select>
      <select [(ngModel)]="personneForm[liste.id].aisanceFrancais" name="aisanceFrancais-{{liste.id}}" required>
        <option *ngFor="let n of [1,2,3,4]" [value]="n">{{ n }}</option>
      </select>
      <label>
        <input type="checkbox" [(ngModel)]="personneForm[liste.id].ancienDWWM" name="ancienDWWM-{{liste.id}}" />
        Ancien DWWM
      </label>
      <select [(ngModel)]="personneForm[liste.id].niveauTechnique" name="niveauTechnique-{{liste.id}}" required>
        <option *ngFor="let n of [1,2,3,4]" [value]="n">{{ n }}</option>
      </select>
      <select [(ngModel)]="personneForm[liste.id].profil" name="profil-{{liste.id}}" required>
        <option value="TIMIDE">Timide</option>
        <option value="RESERVE">RÃ©servÃ©</option>
        <option value="A_L_AISE">Ã€ lâ€™aise</option>
      </select>
      <input type="number" placeholder="Ã‚ge" [(ngModel)]="personneForm[liste.id].age" name="age-{{liste.id}}" min="1" max="99" required />
      <button type="submit">Ajouter Ã  cette liste</button>
    </form>
    <!-- ... Ici tu peux rajouter la partie groupes/tirages/historique comme avant ... -->
  </div>
</div>
